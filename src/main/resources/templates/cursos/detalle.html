<!DOCTYPE html>
<html lang="en">
<head th:include="/fragments/head :: headFragment('Sesión Virtual')"></head>

<body class="fixed-sn">
    <header th:include="/fragments/navbar :: navbar"></header>

    <main id="app" class="container-fluid mx-auto">
        <div class="row">
            <div class="col-md-3">
                <ul
                    class="nav md-pills pills-teal-light flex-column"
                    role="tablist"
                >
                    <li class="nav-item">
                        <a
                            class="nav-link active"
                            data-toggle="tab"
                            href="#publicaciones"
                            role="tab"
                        >
                            <i class="fa fa-history mr-2"></i>
                            Publicaciones
                        </a>
                    </li>

                    <li class="nav-item">
                        <a
                            class="nav-link"
                            data-toggle="tab"
                            href="#temario"
                            role="tab"
                        >
                            <i class="fa fa-pencil-alt mr-2"></i>
                            Temario
                        </a>
                    </li>

                    <li class="nav-item">
                        <a
                            class="nav-link"
                            data-toggle="tab"
                            href="#retos"
                            role="tab"
                        >
                            <i class="fa fa-trophy mr-2"></i>
                            Retos
                        </a>
                    </li>

                    <li class="nav-item">
                        <a
                            class="nav-link"
                            data-toggle="tab"
                            href="#info"
                            role="tab"
                        >
                            <i class="fa fa-info-circle mr-2"></i>
                            Información
                        </a>
                    </li>
                </ul>
            </div>

            <div class="col-md-9">
                <!-- Tab panels -->
                <div class="tab-content vertical">
                    <div
                        class="tab-pane fade in show active"
                        id="publicaciones"
                        role="tabpanel"
                    >
                        <h3 class="mt-2 mb-4 h3">
                            <i class="fa fa-history mr-2"></i>
                            Publicaciones
                            <a
                                class="btn-floating my-auto btn-orange btn-sm pull-right"
                                data-toggle="tooltip"
                                data-placement="left"
                                title="Nueva publicación"
                            >
                                <i class="fa fa-plus"></i>
                            </a>
                        </h3>

                        <div class="row">
                            <div class="col-md-12">
                                <div v-for="(p, i) in publicaciones" class="card">
                                    <div class="card-body p-4">
                                        <h4 class="card-title">
                                            <i v-bind:class=" p.icono + ' mr-2'"></i>
                                            {{ p.titulo }}
                                        </h4>
                                        <p class="card-text mb-1">
                                           {{ p.contenido }}
                                        </p>

                                        <div class="row mb-3">
                                            <div class="col-12">
                                                <div class="md-form input-group mt-1">
                                                    <input
                                                        type="text"
                                                        class="form-control"
                                                        placeholder="Comentario"
                                                        id="comentario"
                                                        v-model="comentarioActual"
                                                    ></input>

                                                    <div class="input-group-append">
                                                        <button
                                                            class="btn teal lighten-2"
                                                            type="button"
                                                            v-on:click="addComentario(i)"
                                                        >
                                                            <i class="fas fa-paper-plane mr-2"></i>
                                                            Comentar
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-12 my-0">
                                                <div
                                                    class="accordion"
                                                    id="accordionEx"
                                                    role="tablist"
                                                    aria-multiselectable="true"
                                                >
                                                    <div class="card">
                                                        <div
                                                            class="card-header px-0"
                                                            role="tab"
                                                            id="headingOne"
                                                        >
                                                            <a
                                                                data-toggle="collapse"
                                                                href="#collapseOne"
                                                                aria-expanded="true"
                                                                aria-controls="collapseOne"
                                                            >
                                                                <h6 class="text-indigo mb-0 h6">
                                                                    <i class="fa fa-comments mr-2"></i>
                                                                    Todos los comentarios ({{ p.comentarios.length }})
                                                                    <i class="fa fa-angle-down rotate-icon"></i>
                                                                </h6>
                                                            </a>
                                                        </div>
                                                        <div
                                                            id="collapseOne"
                                                            class="collapse"
                                                            role="tabpanel"
                                                            aria-labelledby="headingOne"
                                                            data-parent="#accordionEx"
                                                        >
                                                            <div class="card-body p-0">
                                                                <ul class="list-group list-group-flush">
                                                                    <li v-for="c in p.comentarios" class="list-group-item">
                                                                        <div class="media">
                                                                            <img
                                                                                class="d-flex align-self-start mr-3 rounded-circle"
                                                                                v-bind:src="c.usuario.imgPerfil"
                                                                                width="80"
                                                                                height="80"
                                                                            >

                                                                            <div class="media-body">
                                                                                <h5 class="mt-0 font-weight-bold">{{ c.usuario.username }}</h5>
                                                                                <p>{{ c.comentario }}</p>
                                                                            </div>
                                                                        </div>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="rounded-bottom teal lighten-2 text-center pt-3">
                                        <ul class="list-unstyled list-inline font-small">
                                            <li class="list-inline-item pr-2 white-text">
                                                <i class="fa fa-calendar-alt pr-1"></i>
                                                {{ p.fechaPublicacion | moment }}
                                            </li>
                                            <li class="list-inline-item pr-2">
                                                <a
                                                    href="#"
                                                    class="white-text"
                                                >
                                                    <i class="fa fa-comments pr-1"></i>
                                                    {{ p.comentarios.length }}
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div
                        class="tab-pane fade"
                        id="temario"
                        role="tabpanel"
                    >
                        <h3 class="mt-2 mb-4 h3">
                            <i class="fa fa-pencil mr-2"></i>
                            Temario
                        </h3>

                        <div class="row">
                            <div class="col-md-12">
                                <div
                                    class="progress"
                                    style="height: 30px"
                                >
                                    <div
                                        class="progress-bar teal lighten-2"
                                        role="progressbar"
                                        style="width: 25%; height:
							30px"
                                        aria-valuenow="25"
                                        aria-valuemin="0"
                                        aria-valuemax="100"
                                    >
                                        Vaya! llevas un progreso de 25%
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-4 my-2">
                                <div class="card mb-r mx-2">
                                    <!-- Card content -->

                                    <div class="card-body">
                                        <h4 class="card-title">
                                            Complejidad

                                            <i class="fa fa-check-circle teal-text"></i>
                                        </h4>

                                        <p>
                                            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ad dolor nulla repudiandae possimus aliquam?
                                        </p>

                                        <hr>

                                        <p class="card-meta text-center text-indigo
									mb-0">
                                            <a
                                                class="btn btn-flat btn-lg px-1 my-0
										mx-3"
                                                data-toggle="tooltip"
                                                data-placement="bottom"
                                                title="Guardar
										en la nube"
                                            >
                                                <i class="fa fa-cloud"></i>
                                            </a>

                                            <a
                                                class="btn btn-flat btn-lg px-1 my-0
										mx-3"
                                                data-toggle="tooltip"
                                                data-placement="bottom"
                                                title="Ver
										clase grabada"
                                            >
                                                <i class="fa fa-video-camera"></i>
                                            </a>

                                            <a
                                                class="btn btn-flat btn-lg px-1 my-0
										mx-3"
                                                data-toggle="tooltip"
                                                data-placement="bottom"
                                                title="Archivos de la clase"
                                            >
                                                <i class="fa fa-file-text"></i>
                                            </a>
                                        </p>
                                    </div>

                                    <!-- Card content -->
                                </div>
                            </div>

                            <div class="col-md-4 my-2">
                                <div class="card mb-r mx-2">
                                    <!-- Card content -->

                                    <div class="card-body">
                                        <h4 class="card-title">
                                            Hoare

                                            <i class="fa fa-check-circle
												teal-text"></i>
                                        </h4>

                                        <p>
                                            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ad dolor nulla repudiandae possimus aliquam?
                                        </p>

                                        <hr>

                                        <p class="card-meta text-center
											text-indigo mb-0">
                                            <a
                                                class="btn btn-flat btn-lg px-1
												my-0 mx-3"
                                                data-toggle="tooltip"
                                                data-placement="bottom"
                                                title="Guardar en la nube"
                                            >
                                                <i class="fa fa-cloud"></i>
                                            </a>

                                            <a
                                                class="btn btn-flat btn-lg px-1
												my-0 mx-3"
                                                data-toggle="tooltip"
                                                data-placement="bottom"
                                                title="Ver clase grabada"
                                            >
                                                <i class="fa fa-video-camera"></i>
                                            </a>

                                            <a
                                                class="btn btn-flat btn-lg px-1
												my-0 mx-3"
                                                data-toggle="tooltip"
                                                data-placement="bottom"
                                                title="Archivos de la clase"
                                            >
                                                <i class="fa fa-file-text"></i>
                                            </a>
                                        </p>
                                    </div>

                                    <!-- Card content -->
                                </div>
                            </div>

                            <div class="col-md-4 my-2">
                                <div class="card mb-r mx-2">
                                    <!-- Card content -->

                                    <div class="card-body">
                                        <h4 class="card-title">
                                            Búsquedas

                                            <i class="fa fa-check-circle
														teal-text"></i>
                                        </h4>

                                        <p>
                                            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ad dolor nulla repudiandae possimus aliquam?
                                        </p>

                                        <hr>

                                        <p class="card-meta text-center
													text-indigo mb-0">
                                            <a
                                                class="btn btn-flat btn-lg
														px-1 my-0 mx-3"
                                                data-toggle="tooltip"
                                                data-placement="bottom"
                                                title="Guardar en la
														nube"
                                            >
                                                <i class="fa fa-cloud"></i>
                                            </a>

                                            <a
                                                class="btn btn-flat btn-lg
														px-1 my-0 mx-3"
                                                data-toggle="tooltip"
                                                data-placement="bottom"
                                                title="Ver clase grabada"
                                            >
                                                <i class="fa
															fa-video-camera"></i>
                                            </a>

                                            <a
                                                class="btn btn-flat btn-lg
														px-1 my-0 mx-3"
                                                data-toggle="tooltip"
                                                data-placement="bottom"
                                                title="Archivos de la
														clase"
                                            >
                                                <i class="fa
															fa-file-text"></i>
                                            </a>
                                        </p>
                                    </div>

                                    <!-- Card content -->
                                </div>
                            </div>

                            <div class="col-md-4 my-2">
                                <div class="card mb-r mx-2">
                                    <!-- Card content -->

                                    <div class="card-body">
                                        <h4 class="card-title">
                                            Ordenamiento

                                            <i class="fa
																fa-check-circle
																teal-text"></i>
                                        </h4>

                                        <p>
                                            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ad dolor nulla repudiandae possimus aliquam?
                                        </p>

                                        <hr>

                                        <p class="card-meta
															text-center text-indigo
															mb-0">
                                            <a
                                                class="btn btn-flat
																btn-lg px-1 my-0
																mx-3"
                                                data-toggle="tooltip"
                                                data-placement="bottom"
                                                title="Guardar en la
																nube"
                                            >
                                                <i class="fa
																	fa-cloud"></i>
                                            </a>

                                            <a
                                                class="btn btn-flat
																btn-lg px-1 my-0
																mx-3"
                                                data-toggle="tooltip"
                                                data-placement="bottom"
                                                title="Ver clase
																grabada"
                                            >
                                                <i class="fa
																	fa-video-camera"></i>
                                            </a>

                                            <a
                                                class="btn btn-flat
																btn-lg px-1 my-0
																mx-3"
                                                data-toggle="tooltip"
                                                data-placement="bottom"
                                                title="Archivos de
																la clase"
                                            >
                                                <i class="fa
																	fa-file-text"></i>
                                            </a>
                                        </p>
                                    </div>

                                    <!-- Card content -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <div
                        class="tab-pane fade"
                        id="retos"
                        role="tabpanel"
                    >
                        <h3 class="mt-2 mb-4 h3">
                            <i class="fa fa-star mr-2"></i>
                            Retos
                        </h3>
                    </div>

                    <div
                        class="tab-pane fade"
                        id="info"
                        role="tabpanel"
                    >
                        <h3 class="mt-2 mb-4 h3">
                            <i class="fa fa-info-circle
													mr-2"></i>
                            Información
                        </h3>

                        <div class="row">
                            <div class="col-md-12 mb-3">
                                <ul class="list-group
														list-group-flush">
                                    <li class="list-group-item
															flex-column
															align-items-start">
                                        <div class="d-flex
																w-100
																justify-content-between">
                                            <h5 class="mb-3 h6">
                                                <i class="fa
																		fa-file-text"></i>
                                                Descripción
                                            </h5>
                                        </div>

                                        <p class="mb-1 h5">
                                            Desarrollar algoritmos con la finalidad de fortalecer los conocimientos adquiridos, poniendo énfasis en la eficiencia algorítmica, y las habilidades de elaboración de soluciones algorítmicas a problemas basados en un conjunto de componentes que deben
                                            interactuar entre si.
                                        </p>
                                    </li>

                                    <li class="list-group-item
															flex-column
															align-items-start">
                                        <div class="d-flex
																w-100
																justify-content-between">
                                            <h5 class="mb-3 h6">
                                                <i class="fa
																		fa-user"></i>
                                                Tutor
                                            </h5>
                                        </div>

                                        <p class="mb-1 h4">Juan Espinoza</p>
                                    </li>

                                    <li class="list-group-item
															flex-column
															align-items-start">
                                        <div class="d-flex
																w-100
																justify-content-between">
                                            <h5 class="mb-3 h6">
                                                <i class="fa
																		fa-bookmark"></i>
                                                Tema actual
                                            </h5>
                                        </div>

                                        <p class="mb-1 h5">Ordenamiento</p>
                                    </li>

                                    <li class="list-group-item
															flex-column
															align-items-start">
                                        <div class="d-flex
																w-100
																justify-content-between">
                                            <h5 class="mb-3 h6">
                                                <i class="fa
																		fa-calendar"></i>
                                                Horario
                                            </h5>
                                        </div>

                                        <p class="mb-1 h5">Todos los jueves a las 2 pm</p>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <div th:include="/fragments/head :: finalSection"></div>
    <div th:include="/fragments/head :: scripts"></div>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

    <script>
        const app = new Vue({
            el: "#app",
            data: {
                usuarioActual: {
                    username: "Pedro Romero", 
                    imgPerfil: "http://localhost:8080/img/foto_perfil.jpg"   
                },
                comentarioActual: "",
                publicaciones: [
                    {
                        titulo: "Comunicado a la clase",
                        icono: "fa fa-podcast",
                        contenido: "Buenos días jovenes, por motivo del partido de mañana de Perú - Dinamarca se suspemden las clases y se recuperaran de 6pm a 8pm",
                        comentarios: [
                            {
                                usuario: { 
                                    username: "Sarah Connor", 
                                    imgPerfil: "http://localhost:8080/img/perfil2.jpg" 
                                },
                                comentario: "Buena profe,ahora podremos ver el mundial tranquilos :')" 
                            }
                        ],
                        fechaPublicacion: new Date()
                    }
                ]
            },
            methods:{
                addComentario(index) {
                    let comentario = {
                        usuario: this.usuarioActual, 
                        comentario: this.comentarioActual
                    };

                    this.publicaciones[index].comentarios.push(comentario);
                    this.comentarioActual = "";
                    
                    toastr.options = { closeButton: true }

                    toastr.info("Genial! Tu comentario ha publicado");
                }
            },
            filters: {
                moment: function (date) {
                    return moment(date).format('DD/MM/YYYY, h:mm:ss a');
                }
            }
        });
    </script>
</body>
</html>